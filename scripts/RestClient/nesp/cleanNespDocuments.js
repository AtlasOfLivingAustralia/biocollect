// This script will soft delete existing NESP TSR hub's documents

var projectIdArr = ['718b2f98-ce4b-47f2-9027-21463c8cd187','a4c6a828-39b6-46fa-ae69-3e78b20fd19c','d1542333-a419-41b4-955e-48a1da53cabd','61582da3-2803-40df-92cd-25a94d2d87a0','769c85f4-6df7-4899-952f-c55e83cee2d5','d873f1c6-f040-4d75-b811-48029192e058','b8cb6744-a66d-4f63-8292-fd6bff966bbd','25223873-8461-45f5-b247-0294b17f773f','89935e0b-4649-43b7-a854-5f420679fdcd','648e1f1b-5bb0-4602-b09f-8424a2964b74','fee420f7-2e8e-49e2-8b43-aa36a363d6fd','59a578b9-6977-4362-a571-cff88cedc665','8e6506b1-83de-4a84-901f-fb012b85c9b4','a71504b7-b6bd-4958-aede-4f1ad05c2420','fa062960-53c0-43ff-afdf-25dca42a9e6b','cccbfa25-d459-4f0f-80f9-ef2eba19a613','0707f6a7-69e2-4d3b-ad77-627410e2113c','f02c616a-7165-4480-8f02-6eea627aedc6','281622cf-1c73-4b4a-9713-b93d18235309','170e04bb-3661-41fc-a60d-d579229737d8','3c669fff-72c3-466f-abff-3684f86378ad','98be0f9a-9889-4fcc-838d-594de4f99a52','c5d92d2c-8504-4a22-9fed-91494c72209d','f946e601-1d4b-48db-ac34-55806b9332af','9a384f11-4c77-4f5b-af65-dcb776d3a46e','4cbfafe0-7255-407b-bcb1-7aa847384c35','795c4480-48a0-4773-b04e-487ee26c134a','5ce86f55-9b71-45a5-bd13-43c024e065b8','93b8ef2c-2eff-4c9d-9aa1-0b8ec729f172','20701c7c-954a-48a3-992f-7df270778a1e','a18decbe-a760-4fab-9d29-474c8d66454f','cfffb285-9ba4-4037-acc2-993e8f07abc7','d70635bc-077c-4a49-87cd-e23f66290800','Genetic analysis of the Norfolk Island morepork and green parrot','a658b2db-51f9-4baf-8d90-7d8adc96b2c6','f94276f1-f553-47eb-a97b-0b119619bd23','79cb6ae1-38e8-4d2d-b45c-0f6eac36d63e','e76bce7f-26dd-4b2a-a76b-cfd0e9bc2ea2','0814e1ca-3b81-4102-89d1-cd3cf217d9b8','7b89f882-66bb-4798-958f-9986054bb732','20c043f6-7b72-46a4-85be-7a6b2975d84f','cefb7443-419a-49b8-8ae0-3a3fee776471','2c827ac3-0c99-43f9-a95e-c8e99b2cc0ca','81f3cb9d-fafb-40ee-a699-46f9671febba','5c57d37c-127f-495a-a438-1dd6e7496a5e','8f2b7d2a-b850-4e99-89f4-6f23129c64f6','6527a341-c338-46de-a6b4-cc0fc6c69729','f8e5298c-07be-47f8-a6d8-b12840ef4586','aaddf03e-5378-4a99-8013-3d86fd5f5e8b','65946fe5-f624-4a05-a12a-5d422eef856a','9ed04709-56e6-44c1-9790-3e5e72aec454','17f515da-292a-4eb4-84a8-a4683e60e23b','8321b418-f9bd-46c1-bc87-53fde28a303e','4d0e5255-7ebd-431e-b2ae-714bc0584492','f44cebd1-604c-4892-b0cd-641d829c0fd6','de2ac744-d8d3-4c99-ac23-33121ce3efcb','a51cdf8e-ca72-4216-847e-6ab2c72c3284','afc935eb-ebcd-411d-836b-97d9cd88452c','f36cc9d9-6a2a-4dbd-8307-96e62e558a4e','b6c56e2b-9cdc-4bf3-8539-aa1bd85e770d','644ed514-fd93-47cd-b421-f46fceaeff77','3907eda4-6e31-4905-be02-90060d039714','3229ae93-1673-4bfe-bc18-e5540c0761ed','1cac6f31-d349-45c1-803d-5e4005867dbd','db526553-bc6f-418a-bde7-23ba25ac7f75','76af88a3-d2f2-44fe-8a2f-c38c7f6b09b5','2bcb706c-22cf-4ac3-ab55-58a31a832b3a','59615d7c-064c-42b0-a6e3-fd18d77b72e5','7f496bab-336d-4954-8d55-5e006cb056e7','461c100e-3317-4203-b685-0513bb7898b2','81c11965-666b-4afa-95bd-16fc4c1f9c1e','67c48ad3-6abe-405b-809e-eb0384a055db','160f0226-21e3-490c-8914-28b0bff7f24c','4f4311a0-eca5-425e-8e4f-a2241551b4f1','0353dae3-04f1-4138-b74d-4046533a7e8e','8177eced-989d-4c91-a02c-ceff818aa9de','2ab960ac-351d-448b-bd0e-eeefb3bbd51d','9e620a9f-cfaf-475f-868b-69845d72d553','5f4ddff4-d2b0-44de-abb4-d8b96a370c55','Protecting threatened quolls and other biodiversity on Kimberley islands from cane toads','dc133e3e-00d9-4de4-b724-d580391d6abf','83f48557-2cf4-4439-bd50-7349f45a2808','c81c2ea4-2da1-4157-8632-9b4f59cd3db3','15618061-10aa-4422-a391-d8628c36fbb9','e4f7f9d2-69d6-49f2-9bec-33c066a9ab23','3c3ebf3f-be73-4bb9-a94c-8b4fd236d5a8','2ee5b87d-67d4-40d9-a8a3-481776c8eb8f','4da9c72c-0cb2-4b78-b07d-c413c2e3ef6e','10d3a002-b9ec-4e31-8a35-35a6b4883919','9b126355-3938-4e72-b7e6-65dbcb3f2431','95529b42-c7d4-4d1e-8dbb-edf67700e744','ecc9b826-75b3-4d59-a2dd-b800ca021050','e5a95086-3e5e-4b12-8b66-384e97afe8b8','e10dda7e-5c95-49c6-a4fe-f58d6e4c8f82','f431be0f-36fb-4b1d-9901-26a5855c7e0f','17e82227-aee5-4fbf-adaa-50a0469847e7','02f74915-2724-4160-9032-e15997f55ddf','2730cb0b-a56f-4faa-a2a9-2b8b483f8cf1','a36f5545-9e48-4c13-b355-71d65a537c50','b37684f5-9ad1-4e4d-88c2-adae8b04683d','3e30c79b-cf43-4bfb-93ff-6d08012a218f','62306f7a-4d92-4c84-8f63-7b817f2a36fe','1b534164-1f91-4845-859a-e5c583262821','32e59595-41a8-4af7-a36c-5922893e355f','63044869-415f-4fe0-a1cd-578c52745256','13e1977c-d3f2-4c19-91e8-35f6c643a7f4','b285b4ad-f582-4ac7-8d77-4d90e72094d6','c93222b9-7f17-4b1f-a908-9930a2415c96','55a13bdc-7b34-4bb3-8019-8fa2166847b9','a7f44f67-67a5-4c91-814f-699bb94f3f3c','b34cc16d-bc35-4cf7-af80-ea3326688422','3fa4a9ac-e170-4366-af87-44a54f2e2a02','e4d2b504-49c0-4f7b-b424-f0afcfa91d57','6634eba1-923e-4f19-b7db-553427921764','19ab6b81-c294-44a3-a1aa-7344470d74a4','f5d92529-e361-49f2-8518-83c4d3bd3b8b','05ef67d3-f68b-4fcf-bb1a-16422b852349','960c7f24-f623-48b2-af29-7790640f2e27','6214d6d6-3637-4b7f-b4a2-0e06ed767768','7f01519f-297a-4a27-8775-ae93931085ad','0a3da01d-290e-4521-931c-d0335ccca53d','be3e7e8b-bc23-4b1b-a790-37a270657b2a','55862647-8c65-4f09-bd3b-458734b449cb','544a9c37-8fdf-4a4c-8308-301c27fceb2d','b6684efd-d60c-4d30-97a4-b26fc399fd23','6f30defc-a2ca-461e-8464-d58d37e06b10','c3e7e7dd-409b-40b2-bc43-e31e1bc248a5','6c13b23c-34d0-4cec-a15b-d9810fe53bf3','9fe83900-10ab-4b87-8fba-5d2395660bc8','c713e4f1-c57f-4040-9093-24f9aed39ac5','c8a60dd6-29b0-48f3-bc70-8f65c2409b3c','820c418e-689f-4f48-be4d-3fb722b5c718','db35f91d-4528-42af-83b0-6d8c1acadce1','19171f53-374c-448d-819b-f07e6e969d28','74c2807e-8045-4e08-961e-e986c77b9ce7','4ab303d4-9dd5-4bcc-bd2c-92634477ebd1','cd462d4f-43d8-4740-9a75-bdffd73817db','4ef10092-1b0d-4f25-b4c7-d7ec1491a66f','1bec3948-3443-4056-b61a-f6d04b085379','ac205b51-c347-45c7-9e5a-a5be104da18c','83f6bf42-c071-4f58-b1d9-2ed42a6efcc7']


var numOfDocumentsToBeUpdated = db.document.find({$and:[{"projectId": {$in: projectIdArr}},{"contentType": "application/pdf"}]}).count()
print("Number of documents to be updated: " + numOfDocumentsToBeUpdated)

var numOfDocumentsUpdated = db.document.update({$and:[{"projectId": {$in: projectIdArr}},{"contentType": "application/pdf"}]},{$set:{"status": "deleted"}},{multi: true})
print("Number of documents updated: " + numOfDocumentsUpdated)

var documents = db.document.find({$and:[{"projectId": {$in: projectIdArr}},{"contentType": "application/pdf"}]})

var doc = "";
var documentId = "";
var filepath = "";
var filename = "";

print("DOCUMENT ID, FULL PATH");

while (documents.hasNext()) {
    filepath = "/data/ecodata/uploads/"

    doc = documents.next();

    documentId = doc.documentId;
    filename = doc.filename;
    filepath += doc.filepath + "/" + filename;

    print(documentId+", "+filepath);
}